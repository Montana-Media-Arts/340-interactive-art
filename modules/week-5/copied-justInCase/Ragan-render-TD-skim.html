<!DOCTYPE html>
<html>
    <head>
        <title>Matthew Ragan</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="bear-note-unique-identifier" content="FA8F2C2B-B045-47B9-89A7-B66ED4BE7275-8250-0000317E35BDD73C">
        <meta name="created" content="2020-09-22T13:39:16-0600"/>
        <meta name="modified" content="2020-09-22T13:42:49-0600"/>
        <meta name="tags" content=""/>
        <meta name="last device" content="musicKal mac"/>
    </head>
    <body>
        <div class="note-wrapper">
            <h1 id="Matthew Ragan">Matthew Ragan</h1>
<br>
<br>
<h1 id="Rendering | TouchDesigner">Rendering | TouchDesigner</h1>
<p><img src='Ragan-render-TD-skim/9054478576_75010c3c62.jpg'></p>
<p>If you spend much time programming in  <a href="http://www.derivative.ca/">TouchDesigner</a> , eventually you’ll want to start doing some real-time rendering. When dealing with rendering some 3D geometry we need to get a few pieces of our network correctly set-up to get started. There are, of course, lots of different methods for rendering but we can get started with some rendering basics.</p>
<p>Like working in any rendering environment, we need a few things in place to actually draw an image. We need to have the actual object that we want to draw, we need a light source (not always, but for now let’s pretend), and we need to know where we are looking at the scene from. In TouchDesigner we can think of these elements in the following way:</p>
<p> <a href="http://www.derivative.ca/wiki088/index.php?title=Geometry_COMP">Geometry Component</a> – this is our object that we’re drawing. This component holds a Surface Operator (SOP), that is the object we are drawing.</p>
<p> <a href="http://www.derivative.ca/wiki088/index.php?title=Camera_COMP">Camera Component</a>  – this is the vantage point we are drawing out scene from.</p>
<p> <a href="http://www.derivative.ca/wiki088/index.php?title=Light_COMP">Light Component</a>  – this is our light source for our scene. There are some cases where we don’t need a light, but it’s a good rule of thumb to assume that you’ll need to light your scene.</p>
<p> <a href="http://www.derivative.ca/wiki088/index.php?title=Render_TOP">Render TOP</a>  – this texture operator is the drawing / video that is the result of your render set-up. This is the TOP that you’ll end up using in your network / performance / etc.</p>
<p>Using these three components and one operator, we end up with a basic network set-up that looks something like this:</p>
<p><img src='Ragan-render-TD-skim/basic-render-set-up1.png'>At this point you’re probably familiar with patch cords (called wires in TouchDesigner’s official documentation) that connect operators within a single family (CHOPs, TOPs, SOPs, DATs, etc), but you may not be as familiar with the dotted lines with arrows that you see in the image above. These are called data links, and their visibility can be toggled on and off with the short cut key “x”. Unlike wires, data links help us see when operators from different families are connected in some way. We can also see if data is actively being passed through these connections – if the arrow head is moving, then new information is being passed, static arrows tell us that we’re not actively passing new data.</p>
<p>Let’s take a look at a quick example – here we can see that the Geo is constantly sending information to the render TOP. When we change the position of the camera Comp, we can see the arrow heads move. While this might not seem like something worth caring about in this very moment, there will surely come a day when you’re debugging a scene and the ability to quickly see what’s passing new data and what’s not will be the blessing that helps you keep your sanity.</p>
<p><img src='Ragan-render-TD-skim/passing-data.gif'>Let’s take a moment to give our Render TOP a closer look. The Render TOP has five different pages of parameters, and while all of them are important we can start by looking at the Render Page and the Common Page.</p>
<p><img src='Ragan-render-TD-skim/render-page.png'>The Render page contains all of the information about what components we’re currently using. Here we can see that we’re using cam1 as our Camera, * as our Geometry, and * as our Lights. What is this gibberish? Our Render TOP follows many of the pattern matching rules as the rest of TouchDesigner. In this case a * means, “any geometry component.” You can test this by adding another geo to your scene. You’ll see another set of data link lines drawn to the Render TOP, but you won’t see another torus. Why? Well, you won’t see another Torus because it’s being drawn in exactly the same dimensions in the same place.</p>
<p><img src='Ragan-render-TD-skim/second-torus.png'>At this point you could tell your Render TOP which Geo to use by typing in the name of the Geo component. For example, if we write “geo1” in our Geometry Field we’ll only see data links drawn from geo1 to our Render TOP.</p>
<p><img src='Ragan-render-TD-skim/geo11.png'>Why do we care about this? This is useful as it has large scale implications for lots of different rendering situations – advanced lighting, camera actions, etc. This also gives you a way to divvy up rendering between TOPs and composite the video later.</p>
<p>In addition to the Render Page, we should also take a moment to look at the Common Page.</p>
<p><img src='Ragan-render-TD-skim/common-page.png'>On the common page we can specify the resolution of our final image, as well as a few other parameters. Rendering can be a very GPU heavy task, so keeping an eye on your rendering resolution can be extremely helpful in managing the performance of your network. Alright, with all of that general information out of the way, let’s make something with our new found knowledge. Let’s start by rendering a simple sphere.</p>
<p>We can begin by opening up an empty network and adding a Camera COMP, a Geometry COMP, a Light COMP, and a Render TOP. This should now be looking very familiar.</p>
<p><img src='Ragan-render-TD-skim/basic-render-set-up1%202.png'>This, however, is not a sphere… this is a Torus, so how do we change what we’re drawing? To do that we need to look inside of our Geometry Component. Using either the quick key or the zoom method let’s take a look inside of our Geo.</p>
<p><img src='Ragan-render-TD-skim/lonely-torus.png'>Here inside of our Geometry is just a single lonely torus. We should also notice that the display and render flags for this SOP are turned on. What we can learn from what we’re seeing here is that whatever is in the Geo Component with a render flag (purple) turned on will be used when rendering our scene. As a note about efficiency, we can technically render any SOP without placing it inside of a Geometry COMP. The difference is that SOPs located in a TouchDesigner network outside of a Geo are rendered on the CPU, while SOPs inside of a Geo are rendered on the GPU. Generally, the most efficient use of your system’s resources is going to be achieved by making sure that you’re taking as much advantage of your GPU as possible.</p>
<p>Inside of our Geo lets make a few changes. We can start by deleting the Torus SOP. Next lets add a  <a href="http://www.derivative.ca/wiki088/index.php?title=Sphere_SOP">Sphere SOP</a> , a  <a href="http://www.derivative.ca/wiki088/index.php?title=Box_SOP">Box SOP</a> , and a  <a href="http://www.derivative.ca/wiki088/index.php?title=Null_SOP">Null SOP</a> . For now lets wire the Sphere SOP to the Null, and turn on the display and render flags for the Null as well. When you’re done you should have something that looks like this:</p>
<p><img src='Ragan-render-TD-skim/box-and-sphere.png'>Now if we zoom out of our Geo we can see that we’re rendering a Sphere instead of a Torus.</p>
<p><img src='Ragan-render-TD-skim/sphere-from-parent.png'>Suppose that we want to see the box instead? To do that we would zoom inside of the Geo, and wire the Box to the Null instead of the Sphere. This is a prime example of how the use of a Null can be powerful in programming in TouchDeigner. If our geometry chain was much more complicated, or if we wanted to further change our source Surface Operator we could make all of those changes up steam of the Null. Practically this would mean that all of the alterations that were made did not require any changes in order to be targeted for rendering. Let’s take a look at how this might work using a single Null. First let’s add a  <a href="http://www.derivative.ca/wiki088/index.php?title=Merge_SOP">Merge SOP</a>  to our chain, we’ll wire both the Box SOP and the Sphere SOP the Merge, and then wire the Merge to the Null. When we’re done we should have something that looks like this:</p>
<p><img src='Ragan-render-TD-skim/merge-sop.png'>Well, surely something has gone wrong, right? No. Things are just as they’re supposed to be, it just happens that our Box in currently located inside of our Sphere. Let’s change the origin position of our Sphere and our Box so they’re not overlapping. To do this lets start with our Sphere. Clicking on the Sphere SOP let’s start by changing its radius to 0.5 for x y and z, and changing its center to -1 0 0.</p>
<p><img src='Ragan-render-TD-skim/sphere-trans.png'>Next let’s change the origin of our Box to 1 0 0.</p>
<p><img src='Ragan-render-TD-skim/box-size.png'>Now we should be seeing something like this:</p>
<p><img src='Ragan-render-TD-skim/box-and-sphere-merge.png'>Alright. Now let’s back out of our Geo.</p>
<p><img src='Ragan-render-TD-skim/box-and-sphere-from-parent.png'>Excellent. Now we’re getting somewhere. Okay. This is all well and good, but what if I want to have different kinds of materials associated with my Geometry? Our last stop on looking at what we can do with our Geometry Component is going to be materials. Let’s click on our Geo and look at the Render Page. Here you’ll notice that you can assign a material to your geo.</p>
<p><img src='Ragan-render-TD-skim/geo-render-page.png'>How does that work? Well let’s start by adding a material to our scene. Lets add a  <a href="http://www.derivative.ca/wiki088/index.php?title=Phong_MAT">Phong</a> , a  <a href="http://www.derivative.ca/wiki088/index.php?title=Constant_MAT">Constant</a> , and a  <a href="http://www.derivative.ca/wiki088/index.php?title=Wireframe_MAT">Wireframe </a> so we can see how each of them work.</p>
<p><img src='Ragan-render-TD-skim/mats.png'>You can assign a material to a geo by dragging and dropping it onto the geo, or by typing the name of the material into the Material Field. Let’s start by assigning our Phong1 to our geo1.</p>
<p><img src='Ragan-render-TD-skim/phong1.gif'>Well, that’s a subtle change. A Phong shader comes along with some lovely tools for shaded and more realistic rendering. That’s a topic all to itself, so for now let’s just look at how we can change the color of our Phong. On the RGB page of our Phong let’s click on the diffuse swatch, and change our color.</p>
<p><img src='Ragan-render-TD-skim/phong-color.png'>You’ll notice here that it’s changed the color of both our Box and our Sphere. The material that we apply to our Geo will be allied to all of the contents of our component. We can definitely apply different materials to different portions of our geo, but we’ll talk about that another day. If you’re feeling adventurous take some time to play with some of the different settings here in the Phong Mat.</p>
<p>Next let’s look at what happens when we apply the Constant.</p>
<p><img src='Ragan-render-TD-skim/constant-mat.png'>Here we can see that the constant applies a single color to the whole surface of our Geo. It’s worth noting that at this point that we don’t need a Light Component when using a constant as a material. Unlike a Phong which uses a light source when rendering, the constant just emits constant color. Just like the Phong, we can also change the color of our constant. Let’s take a moment to try that out. Just like with the Phong you’ll click on the Constant, and look at the Constant Page:</p>
<p><img src='Ragan-render-TD-skim/constant-color.png'>Alright, now it’s time to look at what happens when we apply the Wireframe to our Geo.</p>
<p><img src='Ragan-render-TD-skim/wireframe.png'>The wireframe, like the constant, does not require a light in the scene to be rendered. In my opinion, some of the most interesting work comes out of mixed materials in rendering – combining phongs and constants, phongs and wireframes, et cetera. You’ll remember that back when we were putting our scene together we merged our Sphere and our Box. The diagonal line connecting them in the wireframe illustrates how they’re still connected. Before we leave the wireframe material let’s change just a few things. Like with our Phong and Constant, we can change the color. We can also change the thickness of the line. Let’s take a closer look at the Wireframe Page of the parameters and make some changes.</p>
<p><img src='Ragan-render-TD-skim/wireframe-attributes.png'>Let’s take a quick look at what our Camera can do for us. First, I’m going to switch back to the Phong as a material. In our Camera settings let’s move back slightly, and set our z rotation to me.time.absFrame.</p>
<p><img src='Ragan-render-TD-skim/camera-settings.png'>Manipulating our camera changes our relationship to the geo in our scene, giving us the ability to shift our perspective. We can further alter this relationship by adding a  <a href="http://www.derivative.ca/wiki088/index.php?title=Null_COMP">Null Comp</a>  to our scene. After we add the Null Comp let’s tell our Camera Comp to look at the Null. We can do this by typing in the name of the Null in the Look At field in the Xform page of the Camera’s parameters:</p>
<p><img src='Ragan-render-TD-skim/look-at-null.png'>Okay, so why do this? Well, before when we altered our camera’s location it was only pointed straight ahead. By adding a null for the camera to look at, we now have a focal point that we can manipulate. This is especially apparent if we translate our camera in either the x or y dimensions. Even thought the camera is moving left / right or up / down, it still stays pointed at our sphere and box.</p>
<p><img src='Ragan-render-TD-skim/pointed-at-a-null.png'>Alright, let’s wrap this up by quickly looking at what our lighting has to offer us. Like all of the other Components we’ve looked at in this post, we are just scratching the surface of what’s possible. This look at rendering is intended just to get you started on the basics. Lets start by looking in the Light page of the Light’s Parameters.</p>
<p><img src='Ragan-render-TD-skim/light.png'>Take some time to play with the color and dimmer settings the light to get started. When you’ve got a sense of how those work, the next attribute to take a closer look at is the Light Type. I’m going to change color of my light to a soft mauve, the light type to cone, and the cone angle to 8.</p>
<p><img src='Ragan-render-TD-skim/light-play.png'>Now that you have a rough idea of what goes into rendering a scene in TouchDesigner, it’s your turn to play and discover. Happy real-time rendering. Want to see what I made, look at the  <a href="https://raganmd.files.wordpress.com/2014/06/rendering.zip">Rendering TOE File</a> .</p>
<p>This entry was posted in  <a href="https://matthewragan.com/category/how-to/">How-To</a> ,  <a href="https://matthewragan.com/category/programming-2/">Programming</a> ,  <a href="https://matthewragan.com/category/how-to/touchdesigner/">TouchDesigner</a>  and tagged  <a href="https://matthewragan.com/tag/arizona/">Arizona</a> ,  <a href="https://matthewragan.com/tag/arizona-state-university/">Arizona State University</a> ,  <a href="https://matthewragan.com/tag/derivative/">Derivative</a> ,  <a href="https://matthewragan.com/tag/grad-school/">Grad School</a> ,  <a href="https://matthewragan.com/tag/graduate-school/">graduate school</a> ,  <a href="https://matthewragan.com/tag/media-design/">media design</a> ,  <a href="https://matthewragan.com/tag/programming/">programming</a> ,  <a href="https://matthewragan.com/tag/touchdesigner/">TouchDesigner</a> ,  <a href="https://matthewragan.com/tag/touchdesigner-tutorial/">TouchDesigner Tutorial</a>  on  <a href="https://matthewragan.com/2014/06/24/rendering-touchdesigner/">June 24, 2014</a> .</p>
<p><b>Post navigation</b></p>
<p> <a href="https://matthewragan.com/2014/06/01/understanding-referencing-touchdesigner/">← Understanding Referencing | TouchDesigner</a> </p>
<p> <a href="https://matthewragan.com/2014/06/27/understanding-referencing-part-ii-touchdesigner/">Understanding Referencing Part II | TouchDesigner →</a> </p>
<br>
<br>
<br>
<br>
<p><img src='Ragan-render-TD-skim/g.gif'></p>

        </div>
        <script type="text/javascript">
            (function() {

    var doc_ols = document.getElementsByTagName("ol");

    for ( i=0; i<doc_ols.length; i++) {

        var ol_start = doc_ols[i].getAttribute("start") - 1;
        doc_ols[i].setAttribute("style", "counter-reset:ol_counter " + ol_start + ";");

    }

})();

        </script>
        <style>
            html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline}html{line-height:1}ol,ul{list-style:none}table{border-collapse:collapse;border-spacing:0}caption,th,td{text-align:left;font-weight:normal;vertical-align:middle}q,blockquote{quotes:none}q:before,q:after,blockquote:before,blockquote:after{content:"";content:none}a img{border:none}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}*{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}html{font-size:87.5%;line-height:1.57143em}html{font-size:14px;line-height:1.6em;-webkit-text-size-adjust:100%}body{background:#fcfcfc;color:#545454;text-rendering:optimizeLegibility;font-family:"AvenirNext-Regular"}a{color:#de4c4f;text-decoration:none}h1{font-family:"AvenirNext-Medium";color:#333;font-size:1.6em;line-height:1.3em;margin-bottom:.78571em}h2{font-family:"AvenirNext-Medium";color:#333;font-size:1.3em;line-height:1em;margin-bottom:.62857em}h3{font-family:"AvenirNext-Medium";color:#333;font-size:1.15em;line-height:1em;margin-bottom:.47143em}p{margin-bottom:1.57143em;hyphens:auto}hr{height:1px;border:0;background-color:#dedede;margin:-1px auto 1.57143em auto}ul,ol{margin-bottom:.31429em}ul ul,ul ol,ol ul,ol ol{margin-bottom:0px}ol{counter-reset:ol_counter}ol li:before{content:counter(ol_counter) ".";counter-increment:ol_counter;color:#e06e73;text-align:right;display:inline-block;min-width:1em;margin-right:0.5em}b,strong{font-family:"AvenirNext-Bold"}i,em{font-family:"AvenirNext-Italic"}code{font-family:"Menlo-Regular"}.text-overflow-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.sf_code_string,.sf_code_selector,.sf_code_attr-name,.sf_code_char,.sf_code_builtin,.sf_code_inserted{color:#D33905}.sf_code_comment,.sf_code_prolog,.sf_code_doctype,.sf_code_cdata{color:#838383}.sf_code_number,.sf_code_boolean{color:#0E73A2}.sf_code_keyword,.sf_code_atrule,.sf_code_rule,.sf_code_attr-value,.sf_code_function,.sf_code_class-name,.sf_code_class,.sf_code_regex,.sf_code_important,.sf_code_variable,.sf_code_interpolation{color:#0E73A2}.sf_code_property,.sf_code_tag,.sf_code_constant,.sf_code_symbol,.sf_code_deleted{color:#1B00CE}.sf_code_macro,.sf_code_entity,.sf_code_operator,.sf_code_url{color:#920448}.note-wrapper{max-width:46em;margin:0px auto;padding:1.57143em 3.14286em}.note-wrapper.spotlight-preview{overflow-x:hidden}u{text-decoration:none;background-image:linear-gradient(to bottom, rgba(0,0,0,0) 50%,#e06e73 50%);background-repeat:repeat-x;background-size:2px 2px;background-position:0 1.05em}s{color:#878787}p{margin-bottom:0.1em}hr{margin-bottom:0.7em;margin-top:0.7em}ul li{text-indent:-0.35em}ul li:before{content:"•";color:#e06e73;display:inline-block;margin-right:0.3em}ul ul{margin-left:1.25714em}ol li{text-indent:-1.45em}ol ol{margin-left:1.25714em}blockquote{display:block;margin-left:-1em;padding-left:0.8em;border-left:0.2em solid #e06e73}.todo-list ul{margin-left:1.88571em}.todo-list li{text-indent:-1.75em}.todo-list li:before{content:"";display:static;margin-right:0px}.todo-checkbox{text-indent:-1.7em}.todo-checkbox svg{margin-right:0.3em;position:relative;top:0.2em}.todo-checkbox svg #check{display:none}.todo-checkbox.todo-checked #check{display:inline}.todo-checkbox.todo-checked+.todo-text{text-decoration:line-through;color:#878787}.code-inline{display:inline;background:white;border:solid 1px #dedede;padding:0.2em 0.5em;font-size:0.9em}.code-multiline{display:block;background:white;border:solid 1px #dedede;padding:0.7em 1em;font-size:0.9em;overflow-x:auto}.hashtag{display:inline-block;color:white;background:#b8bfc2;padding:0.0em 0.5em;border-radius:1em;text-indent:0}.hashtag a{color:#fff}.address a{color:#545454;background-image:linear-gradient(to bottom, rgba(0,0,0,0) 50%,#0da35e 50%);background-repeat:repeat-x;background-size:2px 2px;background-position:0 1.05em}.address svg{position:relative;top:0.2em;display:inline-block;margin-right:0.2em}.color-preview{display:inline-block;width:1em;height:1em;border:solid 1px rgba(0,0,0,0.3);border-radius:50%;margin-right:0.1em;position:relative;top:0.2em;white-space:nowrap}.color-code{margin-right:0.2em;font-family:"Menlo-Regular";font-size:0.9em}.color-hash{opacity:0.4}.ordered-list-number{color:#e06e73;text-align:right;display:inline-block;min-width:1em}.arrow svg{position:relative;top:0.08em;display:inline-block;margin-right:0.15em;margin-left:0.15em}.arrow svg #rod{stroke:#545454}.arrow svg #point{fill:#545454}mark{color:inherit;display:inline;padding:0.2em 0.5em;background-color:#fcffc0}img{max-width:100%;height:auto}

        </style>
    </body>
</html>
